//devin87@qq.com
//build:2017/02/09 09:06:45
!function(e,i){"use strict";function s(e,i){e.className+=" "+i}function a(e,i){e&&(e.innerHTML=i||"")}var t=Q.def,d=Q.getFirst,v=Q.getLast,l=Q.getNext,c=Q.createEle,o=Q.formatSize,n=Q.event,r=n.add,u=Q.Uploader,p=u.Lang;u.extend({init:function(){var e=this.ops.view;e&&s(e,this.html5?"html5":"html4")},draw:function(e){var i=this,s=i.ops,a=s.view;if(a){var l=s.button||{},o=t(p.cancel||l.cancel,"取消"),n=t(p.remove||l.remove,"删除"),u=e.name,f='<div class="fl"><div class="u-name" title="'+u+'">'+u+'</div></div><div class="fr"><div class="u-size"></div><div class="u-speed">--/s</div><div class="u-progress-bar"><div class="u-progress" style="width:1%;"></div></div><div class="u-detail">0%</div><div class="u-state"></div><div class="u-op"><a class="u-op-cancel">'+o+'</a><a class="u-op-remove">'+n+'</a></div></div><div class="clear"></div>',h=e.id,m=c("div","u-item",f);m.taskId=h,e.box=m,a.appendChild(m);var x=v(m.childNodes[1]),g=d(x),Q=v(x);r(g,"click",function(){i.cancel(h)}),r(Q,"click",function(){i.remove(h),a.removeChild(m)}),i.update(e)}},update:function(e){if(e&&e.box){var s=e.total||e.size,t=e.loaded,v=e.state,c=e.box,n=c.childNodes[1],r=d(n),p=l(r),f=l(p),h=d(f),m=l(f),x=l(m);if(a(x,u.getStatusText(v)),!(0>s)){var g="";if(this.html5&&t!=i&&t>=0){var Q;if(v==u.PROCESSING){var b=Math.min(100*t/s,100);Q=b.toFixed(1),"100.0"==Q&&(Q="99.9")}else v==u.COMPLETE&&(Q="100");Q&&(Q+="%",h.style.width=Q,a(m,Q)),g='<span class="u-loaded">'+o(t)+"</span> / ";var w=e.avgSpeed||e.speed;a(p,o(w)+"/s")}g+='<span class="u-total">'+o(s)+"</span>",a(r,g)}}},over:function(e){e&&e.box&&s(e.box,"u-over")}})}(window);